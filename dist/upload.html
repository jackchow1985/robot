<!doctype html><html class="no-js" ng-app="inspinia"><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width"><link rel="stylesheet" href="styles/vendor-fb217f3a.css"><link rel="stylesheet" href="styles/app-1ce254f0.css"><link rel="stylesheet" href="styles/basic.min.css"><link rel="stylesheet" href="styles/dropzone.min.css"></head><body style="background-color: #eee;"><nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="background-color: #1ab394;"><div class="container"><div class="collapse navbar-collapse navbar-ex1-collapse dropdown-prod-cart-scroll scroll-menu"><ul class="nav navbar-nav navbar-right"><li class="dropdown"><a style="color:white">智能投資顧問</a></li><li class="dropdown"><a style="color:white">智能交易行为顧問</a><ul class="dropdown-menu vertical-li"><li><a href="about.html">About Us Page 1</a></li><li><a href="about2.html">About Us Page 2</a></li><li><a href="about3.html">About Us Page 3</a></li><li><a href="about4.html">About Us Page 4</a></li></ul></li><li class="dropdown"><a style="color:white">智能風險管理顧問</a></li><li class="dropdown menu-large"><a style="color:white">怎樣運作？</a></li><li class="dropdown"><a style="color:white">馬上登入</a></li><li><a style="color:white" href="contact.html">聯繫我們</a></li></ul></div></div></nav><div class="wrapper wrapper-content animated fadeIn" style="margin-top:50px"><div ui-view=""><div class="row"><div class="col-md-2"></div><div class="col-lg-8"><div class="ibox float-e-margins"><div class="ibox-content text-center"><div id="dropzone"><form method="POST" action="uploadFile" class="dropzone" id="fileUpload"><div class="dz-message needsclick"><span id="uploadText">直接把文件拖拉此处上传 或 点击这里开始上传.</span><br><span id="uploadFileText">目前只接受单个.htm后缀的MT4交易记录文件</span></div></form></div><div><div class="m text-right"></div></div><div class="row" id="error" style="display : none; margin: 0;"><div class="alert alert-danger alert-dismissable"></div></div><div class="row" id="sendSuccess" style="display : none; margin: 0;"><div class="alert alert-success alert-dismissable"><span id="successText">提交成功，结果努力计算中... ...</span> <span id="warningText" style="display : none; margin: 0;">交易记录缺失或不完整，计算结果将会受影响</span> <i class="fa fa-spinner fa-spin"></i></div></div></div><div class="row" id="resultPanel" style="display : none"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5 id="resultText">文件分析结果</h5></div><div class="ibox-content"><div class="row" id="warnBox" style="display : none; margin: 0;"><div id="warnText" class="alert alert-warning alert-dismissable"></div></div><table class="footable table table-stripped toggle-arrow-tiny default breakpoint footable-loaded" data-page-size="8"><thead><tr><th data-toggle="true" class="footable-visible footable-first-column footable-sortable"><span id="propText">属性列</span><span class="footable-sort-indicator"></span></th><th data-hide="all" class="footable-sortable"><span id="extText">提取结果</span><span class="footable-sort-indicator"></span></th><th class="footable-visible footable-last-column footable-sortable"><span id="passText">通过</span><span class="footable-sort-indicator"></span></th></tr></thead><tbody><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="accountText">帐号</span></td><td id="account"></td><td class="footable-visible footable-last-column"><a href="#"><i class="account fa fa-times text-danger"></i></a></td></tr><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="nameText">名字</span></td><td id="name"></td><td class="footable-visible footable-last-column"><a href="#"><i class="name fa fa-times text-danger"></i></a></td></tr><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="ccyText">币种</span></td><td id="currency"></td><td class="footable-visible footable-last-column"><a href="#"><i class="currency fa fa-times text-danger"></i></a></td></tr><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="levText">杠杆率</span></td><td id="leverage"></td><td class="footable-visible footable-last-column"><a href="#"><i class="leverage fa fa-times text-danger"></i></a></td></tr><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="timeText">截止时间</span></td><td id="time"></td><td class="footable-visible footable-last-column"><a href="#"><i class="time fa fa-times text-danger"></i></a></td></tr><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="ftText">第一条Ticket ID</span></td><td id="firstTicketId"></td><td class="footable-visible footable-last-column"><a href="#"><i class="time fa fa-times text-danger"></i></a></td></tr><tr class="footable-even" style="display: table-row;"><td class="footable-visible footable-first-column"><span class="footable-toggle"></span><span id="ltText">最后一条Ticket ID</span></td><td id="lastTicketId"></td><td class="footable-visible footable-last-column"><a href="#"><i class="time fa fa-times text-danger"></i></a></td></tr></tbody><tfoot></tfoot></table><input type="hidden" id="mongoID"> <button type="button" class="btn btn-primary dim" id="sendText">确认信息无误并提交</button></div></div></div></div></div></div><div class="col-md-2"></div></div></div><div class="row text-center" style="color:#ccc">Copyright by HKFDT 2016</div></div><script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-69799375-1', 'auto');
          ga('send', 'pageview');
    </script><script src="//cdn.bootcss.com/jquery/3.0.0-alpha1/jquery.js"></script><script src="scripts/dropzone.min.js"></script><script type="text/javascript">
    $(document).ready(function() {
      var detectedLang = window.navigator.userLanguage || window.navigator.language;
      var lang = "cn"
      if(detectedLang) {
        if(detectedLang == "zh-CN")
          lang = "cn"
        else if(detectedLang == "zh-HK" || detectedLang == "zh-TW")
          lang = "tw"
        else 
          lang = "gb"
      }
      var texts = $( "[id*='Text']");
      var langMap = {
        "titleText_cn":"交易文件上传区",
        "uploadText_cn":"直接把文件拖拉此处上传 或 点击这里开始上传.",
        "uploadFileText_cn":"目前只接受单个.htm后缀的MT4交易记录文件",
        "successText_cn":"提交成功，结果努力计算中",
        "warningText_cn":"交易记录缺失或不完整，计算结果将会受影响",
        "resultText_cn":"文件分析结果",
        "propText_cn":"属性列",
        "extText_cn":"提取结果",
        "passText_cn":"通过",
        "accountText_cn":"帐号",
        "nameText_cn":"名字",
        "ccyText_cn":"币种",
        "levText_cn":"杠杆率",
        "timeText_cn":"截止时间",
        "ftText_cn":"第一条Ticket ID",
        "ltText_cn":"最后一条Ticket ID",
        "sendText_cn":"确认信息无误并提交",
        "sendStillText_cn":"仍然提交",
        "modified_cn" : "警告! 检测到文件被手动修改，可能的原因：文件是通过邮件附件或其它下载渠道获得。建议做法：在MT4客户端所在电脑上传此文件。",

        "titleText_tw":"交易檔案上載區",
        "uploadText_tw":"直接把檔案拖到此處 或 點擊這裡開始上載",
        "uploadFileText_tw":"目前只接受單個.htm的MT4交易記錄檔案",
        "warningText_tw":"交易記錄缺失或不完整，計算結果將會受影響",
        "successText_tw":"提交成功，結果努力計算中... ...",
        "resultText_tw":"檔案分析結果",
        "propText_tw":"欄位",
        "extText_tw":"抓取結果",
        "passText_tw":"通過",
        "accountText_tw":"帳戶",
        "nameText_tw":"名字",
        "ccyText_tw":"幣種",
        "levText_tw":"槓桿率",
        "timeText_tw":"截止時間",
        "ftText_tw":"第一個Ticket ID",
        "ltText_tw":"最後一個Ticket ID",
        "sendText_tw":"確認無誤並提交",
        "sendStillText_tw":"依然提交",
        "modified_tw" : "警告! 檢測到檔案被手動修改。可能的原因，檔案是通過郵件附近或其他下載管道獲得。建議做法：在MT4客戶端所在電腦上載此文件。",

        "titleText_gb":"Trading History File Upload Area",
        "uploadText_gb":"Drag file here or click here",
        "uploadFileText_gb":"Support .htm MT4 file only",
        "successText_gb":"Upload successfully, generating the result",
        "warningText_gb":"Missing trading record, result might be affected",
        "resultText_gb":"Extraction Result",
        "propText_gb":"Columns",
        "extText_gb":"Result",
        "passText_gb":"Pass",
        "accountText_gb":"Account",
        "nameText_gb":"Name",
        "ccyText_gb":"Currency",
        "levText_gb":"Leverage",
        "timeText_gb":"Time",
        "ftText_gb":"The first Ticket ID",
        "ltText_gb":"The last Ticket ID",
        "sendText_gb":"Confirm and Submit",
        "sendStillText_gb":"Submit Anyway",
        "modified_gb" : "Warning! This file was manually modified. Possible reasons: this file was downloaded from email attachment or other 3rd-party websites. You should upload this file from the pc which originally installed MT4 client"
      }
      function changeLang() {
        for(var i = 0 ; i < texts.length; i++) {
          texts.eq(i).text(langMap[texts.eq(i).attr("id") + "_" + lang])
        }
      }
      changeLang();
      $(".lang").click(function() {
        lang = $(this).attr("lang")
        changeLang()
      })
      console.info(langMap)
      $("#sendText").click(function() {
        $("#error").hide();
        $("#resultPanel").slideUp(300, function() {
          $("#sendSuccess").fadeIn(300);
          setTimeout(function() {
            location.href = "/dashboard.html#/index/mt4/" + $("#account").text();
          }, 2000);
        });
        
        
      })
      Dropzone.autoDiscover = false;
      var myDropzone = new Dropzone("#fileUpload");
      myDropzone.on("dragend", function() {        
        $("#error").hide();
        $("#resultPanel").hide();
        $("#sendSuccess").hide();
      });
      myDropzone.on("error", function(file, errorMessage, xhr) {
        $("#error").fadeIn(1000);
        $("#error .alert").text(errorMessage)
      });

      myDropzone.on("success", function(file, msg, xhr) {
        //console.info(file)
        $("#sendSuccess").hide();
        $("#warnBox").hide();
        $("#warningText").hide();
        $("#warnText").hide();
        $("#sendText").show();
        console.info(msg)
        if(msg) {
          if(Math.abs(file.lastModified) - Date.parse(new Date(msg.time )) > 60*1000) {
            $("#warningText").show();
            $("#warnBox").show();
            $("#warnText").show();
            $("#warnText").text(langMap["modified_" + lang])
            $("#sendText").text(langMap["sendStillText_" + lang])
            // $("#sendText").hide();
          }
          else if(msg.convertMsg && msg.convertMsg.code != 100) {
            $("#warningText").show();
            $("#warnBox").show();
            $("#warnText").show();
            $("#warnText").text(msg.convertMsg.message)
            $("#sendText").text(langMap["sendStillText_" + lang]);
            if(msg.convertMsg.code == 500) // fatal error, hide submit button
              $("#sendText").hide();
          }
          $("#mongoID").val(msg._id)
          $("#resultPanel").slideDown(400);
          $("#error").hide();
          for(var i in msg) {
            $("#" + i) .text(msg[i])
            if(msg[i])
              $("." + i) .removeClass("text-danger").addClass("text-navy").removeClass("fa-times").addClass("fa-check")
          }
        }

      });
      
    })
    </script></body></html>