angular.module('starter.controllers', ['ionic'])
// .controller('LoadingCtrl', function($scope, $ionicLoading) {
//   $scope.show = function() {
//     $ionicLoading.show({
//       template: 'Loading...'
//     }).then(function(){
//        console.log("The loading indicator is now displayed");
//     });
//   };
//   $scope.hide = function(){
//     $ionicLoading.hide().then(function(){
//        console.log("The loading indicator is now hidden");
//     });
//   };
// })
.controller('TabsCtrl', function($scope, $rootScope, $ionicLoading, $ionicTabsDelegate, $ionicPlatform) {
  $scope.onTabSelected = function() {
    console.info("tab selected" + $ionicTabsDelegate.selectedIndex())
  }
  $ionicPlatform.ready(function() {
      // var client_id = "robotadvisor";
      // var client_secret = "123456";

      // FingerprintAuth.isAvailable(function(result) {
      //     if (result.isAvailable) {
      //         if(result.hasEnrolledFingerprints){
      //             FingerprintAuth.show({
      //                 clientId: client_id,
      //                 clientSecret: client_secret
      //             }, function (result) {
      //                 if (result.withFingerprint) {
      //                     alert("Successfully authenticated using a fingerprint");
      //                 } else if (result.withPassword) {
      //                     alert("Authenticated with backup password");
      //                 }
      //             }, function(error) {
      //                 console.log(error); // "Fingerprint authentication not available"
      //             });
      //         }else{
      //             alert("Fingerprint auth available, but no fingerprint registered on the device");
      //         }
      //     }
      // }, function(message) {
      //     alert("Cannot detect fingerprint device : "+ message);
      // });
    });
})

.controller('DashCtrl', function($scope, Speaks, $rootScope, $ionicLoading) {
  $scope.curSlide = 0
  var riskExpected = {
    "1":[{"on_year":1,"q_0.05":-0.0398898033,"q_0.15":0.0081550823,"q_0.5":0.089998717,"q_0.85":0.1718423516,"q_0.95":0.2198872372},{"on_year":2,"q_0.05":-0.0036926731,"q_0.15":0.0642530558,"q_0.5":0.1799974339,"q_0.85":0.2957418121,"q_0.95":0.3636875409},{"on_year":3,"q_0.05":0.0450226344,"q_0.15":0.1282388174,"q_0.5":0.2699961509,"q_0.85":0.4117534844,"q_0.95":0.4949696673},{"on_year":4,"q_0.05":0.1002178273,"q_0.15":0.1963075985,"q_0.5":0.3599948679,"q_0.85":0.5236821372,"q_0.95":0.6197719084},{"on_year":5,"q_0.05":0.159554024,"q_0.15":0.2669856542,"q_0.5":0.4499935848,"q_0.85":0.6330015155,"q_0.95":0.7404331457},{"on_year":6,"q_0.05":0.2218317036,"q_0.15":0.3395171581,"q_0.5":0.5399923018,"q_0.85":0.7404674454,"q_0.95":0.8581528999},{"on_year":7,"q_0.05":0.2863382959,"q_0.15":0.413453115,"q_0.5":0.6299910187,"q_0.85":0.8465289225,"q_0.95":0.9736437416},{"on_year":8,"q_0.05":0.3526095217,"q_0.15":0.4885009794,"q_0.5":0.7199897357,"q_0.85":0.951478492,"q_0.95":1.0873699497},{"on_year":9,"q_0.05":0.4203228918,"q_0.15":0.5644575487,"q_0.5":0.8099884527,"q_0.85":1.0555193567,"q_0.95":1.1996540135},{"on_year":10,"q_0.05":0.4892436036,"q_0.15":0.6411748721,"q_0.5":0.8999871696,"q_0.85":1.1587994672,"q_0.95":1.3107307356},{"on_year":11,"q_0.05":0.5591944002,"q_0.15":0.7185412589,"q_0.5":0.9899858866,"q_0.85":1.2614305143,"q_0.95":1.420777373},{"on_year":12,"q_0.05":0.6300375707,"q_0.15":0.7964699365,"q_0.5":1.0799846036,"q_0.85":1.3634992706,"q_0.95":1.5299316365}],
    "2":[{"on_year":1,"q_0.05":-0.0527813799,"q_0.15":0.0041006537,"q_0.5":0.1009982176,"q_0.85":0.1978957815,"q_0.95":0.254777815},{"on_year":2,"q_0.05":-0.0154807572,"q_0.15":0.0649625861,"q_0.5":0.2019964352,"q_0.85":0.3390302842,"q_0.95":0.4194736275},{"on_year":3,"q_0.05":0.0366405768,"q_0.15":0.135163149,"q_0.5":0.3029946527,"q_0.85":0.4708261565,"q_0.95":0.5693487287},{"on_year":4,"q_0.05":0.0964336754,"q_0.15":0.2101977425,"q_0.5":0.4039928703,"q_0.85":0.5977879981,"q_0.95":0.7115520652},{"on_year":5,"q_0.05":0.1611294545,"q_0.15":0.2883215482,"q_0.5":0.5049910879,"q_0.85":0.7216606276,"q_0.95":0.8488527213},{"on_year":6,"q_0.05":0.2293077589,"q_0.15":0.3686397166,"q_0.5":0.6059893055,"q_0.85":0.8433388943,"q_0.95":0.9826708521},{"on_year":7,"q_0.05":0.3001249515,"q_0.15":0.4506206664,"q_0.5":0.7069875231,"q_0.85":0.9633543798,"q_0.95":1.1138500946},{"on_year":8,"q_0.05":0.373031356,"q_0.15":0.5339180426,"q_0.5":0.8079857407,"q_0.85":1.0820534387,"q_0.95":1.2429401253},{"on_year":9,"q_0.05":0.4476451659,"q_0.15":0.6182912666,"q_0.5":0.9089839582,"q_0.85":1.1996766499,"q_0.95":1.3703227506},{"on_year":10,"q_0.05":0.5236883902,"q_0.15":0.7035651742,"q_0.5":1.0099821758,"q_0.85":1.3163991774,"q_0.95":1.4962759614},{"on_year":11,"q_0.05":0.6009511683,"q_0.15":0.7896075309,"q_0.5":1.1109803934,"q_0.85":1.4323532559,"q_0.95":1.6210096185},{"on_year":12,"q_0.05":0.6792704591,"q_0.15":0.8763156034,"q_0.5":1.211978611,"q_0.85":1.5476416186,"q_0.95":1.7446867629}],
    "3":[{"on_year":1,"q_0.05":-0.0702384423,"q_0.15":-0.0044117391,"q_0.5":0.1077229155,"q_0.85":0.2198575701,"q_0.95":0.2856842733},{"on_year":2,"q_0.05":-0.0362295348,"q_0.15":0.0568634817,"q_0.5":0.215445831,"q_0.85":0.3740281803,"q_0.95":0.4671211968},{"on_year":3,"q_0.05":0.014930633,"q_0.15":0.1289458275,"q_0.5":0.3231687466,"q_0.85":0.5173916656,"q_0.95":0.6314068601},{"on_year":4,"q_0.05":0.0749689464,"q_0.15":0.2066223529,"q_0.5":0.4308916621,"q_0.85":0.6551609712,"q_0.95":0.7868143777},{"on_year":5,"q_0.05":0.1406808841,"q_0.15":0.2878738673,"q_0.5":0.5386145776,"q_0.85":0.7893552879,"q_0.95":0.936548271},{"on_year":6,"q_0.05":0.2104229725,"q_0.15":0.3716648069,"q_0.5":0.6463374931,"q_0.85":0.9210101793,"q_0.95":1.0822520137},{"on_year":7,"q_0.05":0.2832189129,"q_0.15":0.4573799993,"q_0.5":0.7540604086,"q_0.85":1.050740818,"q_0.95":1.2249019044},{"on_year":8,"q_0.05":0.3584325925,"q_0.15":0.5446186255,"q_0.5":0.8617833242,"q_0.85":1.1789480228,"q_0.95":1.3651340558},{"on_year":9,"q_0.05":0.4356221662,"q_0.15":0.633102276,"q_0.5":0.9695062397,"q_0.85":1.3059102034,"q_0.95":1.5033903131},{"on_year":10,"q_0.05":0.514465929,"q_0.15":0.7226282421,"q_0.5":1.0772291552,"q_0.85":1.4318300683,"q_0.95":1.6399923814},{"on_year":11,"q_0.05":0.5947210196,"q_0.15":0.8130434955,"q_0.5":1.1849520707,"q_0.85":1.5568606459,"q_0.95":1.7751831218},{"on_year":12,"q_0.05":0.6761987592,"q_0.15":0.9042291482,"q_0.5":1.2926749862,"q_0.85":1.6811208243,"q_0.95":1.9091512133}],
    "4":[{"on_year":1,"q_0.05":-0.08293773,"q_0.15":-0.0110739156,"q_0.5":0.1113448537,"q_0.85":0.2337636231,"q_0.95":0.3056274375},{"on_year":2,"q_0.05":-0.0520673574,"q_0.15":0.0495634236,"q_0.5":0.2226897075,"q_0.85":0.3958159914,"q_0.95":0.4974467724},{"on_year":3,"q_0.05":-0.0024727449,"q_0.15":0.1219990329,"q_0.5":0.3340345612,"q_0.85":0.5460700896,"q_0.95":0.6705418673},{"on_year":4,"q_0.05":0.0568142475,"q_0.15":0.2005418762,"q_0.5":0.445379415,"q_0.85":0.6902169537,"q_0.95":0.8339445825},{"on_year":5,"q_0.05":0.1222952046,"q_0.15":0.2829875787,"q_0.5":0.5567242687,"q_0.85":0.8304609588,"q_0.95":0.9911533329},{"on_year":6,"q_0.05":0.1921759264,"q_0.15":0.3682056026,"q_0.5":0.6680691225,"q_0.85":0.9679326424,"q_0.95":1.1439623186},{"on_year":7,"q_0.05":0.2653905755,"q_0.15":0.4555243567,"q_0.5":0.7794139762,"q_0.85":1.1033035958,"q_0.95":1.2934373769},{"on_year":8,"q_0.05":0.3412447002,"q_0.15":0.5445062621,"q_0.5":0.89075883,"q_0.85":1.2370113979,"q_0.95":1.4402729598},{"on_year":9,"q_0.05":0.4192559324,"q_0.15":0.6348473756,"q_0.5":1.0021036837,"q_0.85":1.3693599918,"q_0.95":1.584951435},{"on_year":10,"q_0.05":0.4990730631,"q_0.15":0.7263263979,"q_0.5":1.1134485375,"q_0.85":1.500570677,"q_0.95":1.7278240119},{"on_year":11,"q_0.05":0.5804309576,"q_0.15":0.8187762659,"q_0.5":1.2247933912,"q_0.85":1.6308105165,"q_0.95":1.8691558249},{"on_year":12,"q_0.05":0.6631236328,"q_0.15":0.9120671883,"q_0.5":1.336138245,"q_0.85":1.7602093017,"q_0.95":2.0091528572}],
    "5":[{"on_year":1,"q_0.05":-0.0978673165,"q_0.15":-0.0186881177,"q_0.5":0.1161922829,"q_0.85":0.2510726836,"q_0.95":0.3302518824},{"on_year":2,"q_0.05":-0.0703414229,"q_0.15":0.0416348739,"q_0.5":0.2323845658,"q_0.85":0.4231342577,"q_0.95":0.5351105546},{"on_year":3,"q_0.05":-0.0221852533,"q_0.15":0.1149571419,"q_0.5":0.3485768488,"q_0.85":0.5821965556,"q_0.95":0.7193389509},{"on_year":4,"q_0.05":0.0366499328,"q_0.15":0.1950083304,"q_0.5":0.4647691317,"q_0.85":0.734529933,"q_0.95":0.8928883306},{"on_year":5,"q_0.05":0.102309599,"q_0.15":0.2793596699,"q_0.5":0.5809614146,"q_0.85":0.8825631593,"q_0.95":1.0596132302},{"on_year":6,"q_0.05":0.1728169043,"q_0.15":0.3667655396,"q_0.5":0.6971536975,"q_0.85":1.0275418554,"q_0.95":1.2214904907},{"on_year":7,"q_0.05":0.2469975145,"q_0.15":0.4564859836,"q_0.5":0.8133459805,"q_0.85":1.1702059773,"q_0.95":1.3796944464},{"on_year":8,"q_0.05":0.324086286,"q_0.15":0.5480388796,"q_0.5":0.9295382634,"q_0.85":1.3110376472,"q_0.95":1.5349902408},{"on_year":9,"q_0.05":0.4035517479,"q_0.15":0.6410893443,"q_0.5":1.0457305463,"q_0.85":1.4503717483,"q_0.95":1.6879093447},{"on_year":10,"q_0.05":0.4850069399,"q_0.15":0.7353935514,"q_0.5":1.1619228292,"q_0.85":1.588452107,"q_0.95":1.8388387185},{"on_year":11,"q_0.05":0.568159738,"q_0.15":0.8307674316,"q_0.5":1.2781151121,"q_0.85":1.7254627927,"q_0.95":1.9880704863},{"on_year":12,"q_0.05":0.6527831908,"q_0.15":0.9270679813,"q_0.5":1.3943073951,"q_0.85":1.8615468088,"q_0.95":2.1358315993}],
    "6":[{"on_year":1,"q_0.05":-0.1202101172,"q_0.15":-0.0306903175,"q_0.5":0.1218051187,"q_0.85":0.2743005549,"q_0.95":0.3638203547},{"on_year":2,"q_0.05":-0.0986509916,"q_0.15":0.0279491234,"q_0.5":0.2436102374,"q_0.85":0.4592713515,"q_0.95":0.5858714665},{"on_year":3,"q_0.05":-0.0537673287,"q_0.15":0.1012855127,"q_0.5":0.3654153562,"q_0.85":0.6295451996,"q_0.95":0.7845980411},{"on_year":4,"q_0.05":0.0031900029,"q_0.15":0.1822296025,"q_0.5":0.4872204749,"q_0.85":0.7922113473,"q_0.95":0.9712509468},{"on_year":5,"q_0.05":0.0678630744,"q_0.15":0.268035432,"q_0.5":0.6090255936,"q_0.85":0.9500157552,"q_0.95":1.1501881128},{"on_year":6,"q_0.05":0.1380168742,"q_0.15":0.3572947055,"q_0.5":0.7308307123,"q_0.85":1.1043667191,"q_0.95":1.3236445504},{"on_year":7,"q_0.05":0.2123237032,"q_0.15":0.4491708308,"q_0.5":0.852635831,"q_0.85":1.2561008313,"q_0.95":1.4929479589},{"on_year":8,"q_0.05":0.2899184918,"q_0.15":0.5431187216,"q_0.5":0.9744409498,"q_0.85":1.4057631779,"q_0.95":1.6589634078},{"on_year":9,"q_0.05":0.3702003606,"q_0.15":0.6387597599,"q_0.5":1.0962460685,"q_0.85":1.5537323771,"q_0.95":1.8222917764},{"on_year":10,"q_0.05":0.4527318131,"q_0.15":0.735818276,"q_0.5":1.2180511872,"q_0.85":1.7002840984,"q_0.95":1.9833705613},{"on_year":11,"q_0.05":0.5371825747,"q_0.15":0.8340861618,"q_0.5":1.3398563059,"q_0.85":1.84562645,"q_0.95":2.1425300372},{"on_year":12,"q_0.05":0.6232960548,"q_0.15":0.9334017378,"q_0.5":1.4616614247,"q_0.85":1.9899211115,"q_0.95":2.3000267945}],
    "7":[{"on_year":1,"q_0.05":-0.137018202,"q_0.15":-0.0389444699,"q_0.5":0.1281224425,"q_0.85":0.2951893549,"q_0.95":0.393263087},{"on_year":2,"q_0.05":-0.1187206104,"q_0.15":0.0199765916,"q_0.5":0.256244885,"q_0.85":0.4925131783,"q_0.95":0.6312103803},{"on_year":3,"q_0.05":-0.0748697399,"q_0.15":0.0949989469,"q_0.5":0.3843673274,"q_0.85":0.673735708,"q_0.95":0.8436043948},{"on_year":4,"q_0.05":-0.017791519,"q_0.15":0.1783559451,"q_0.5":0.5124897699,"q_0.85":0.8466235948,"q_0.95":1.0427710589},{"on_year":5,"q_0.05":0.0477397078,"q_0.15":0.2670392394,"q_0.5":0.6406122124,"q_0.85":1.0141851854,"q_0.95":1.233484717},{"on_year":6,"q_0.05":0.1192753658,"q_0.15":0.3595059665,"q_0.5":0.7687346549,"q_0.85":1.1779633432,"q_0.95":1.4181939439},{"on_year":7,"q_0.05":0.1953608896,"q_0.15":0.4548395948,"q_0.5":0.8968570974,"q_0.85":1.3388745999,"q_0.95":1.5983533051},{"on_year":8,"q_0.05":0.2750485491,"q_0.15":0.5524429531,"q_0.5":1.0249795398,"q_0.85":1.4975161266,"q_0.95":1.7749105305},{"on_year":9,"q_0.05":0.3576800489,"q_0.15":0.651901245,"q_0.5":1.1531019823,"q_0.85":1.6543027196,"q_0.95":1.9485239157},{"on_year":10,"q_0.05":0.442776088,"q_0.15":0.7529124599,"q_0.5":1.2812244248,"q_0.85":1.8095363897,"q_0.95":2.1196727616},{"on_year":11,"q_0.05":0.5299748329,"q_0.15":0.8552486039,"q_0.5":1.4093468673,"q_0.85":1.9634451307,"q_0.95":2.2887189017},{"on_year":12,"q_0.05":0.618995175,"q_0.15":0.9587325486,"q_0.5":1.5374693098,"q_0.85":2.1162060709,"q_0.95":2.4559434445}],
    "8":[{"on_year":1,"q_0.05":-0.1539266235,"q_0.15":-0.0480876436,"q_0.5":0.1322072347,"q_0.85":0.3125021129,"q_0.95":0.4183410928},{"on_year":2,"q_0.05":-0.1402399135,"q_0.15":0.0094390072,"q_0.5":0.2644144693,"q_0.85":0.5193899314,"q_0.95":0.6690688522},{"on_year":3,"q_0.05":-0.0989766761,"q_0.15":0.0843418144,"q_0.5":0.396621704,"q_0.85":0.7089015935,"q_0.95":0.8922200841},{"on_year":4,"q_0.05":-0.0434387777,"q_0.15":0.1682391821,"q_0.5":0.5288289386,"q_0.85":0.8894186952,"q_0.95":1.101096655},{"on_year":5,"q_0.05":0.0212214158,"q_0.15":0.2578845695,"q_0.5":0.6610361733,"q_0.85":1.0641877771,"q_0.95":1.3008509308},{"on_year":6,"q_0.05":0.0923614573,"q_0.15":0.3516129529,"q_0.5":0.793243408,"q_0.85":1.234873863,"q_0.95":1.4941253586},{"on_year":7,"q_0.05":0.1684116122,"q_0.15":0.448435232,"q_0.5":0.9254506426,"q_0.85":1.4024660532,"q_0.95":1.682489673},{"on_year":8,"q_0.05":0.2483491115,"q_0.15":0.5477069531,"q_0.5":1.0576578773,"q_0.85":1.5676088015,"q_0.95":1.866966643},{"on_year":9,"q_0.05":0.3314635374,"q_0.15":0.6489804771,"q_0.5":1.1898651119,"q_0.85":1.7307497468,"q_0.95":2.0482666864},{"on_year":10,"q_0.05":0.4172376391,"q_0.15":0.7519298808,"q_0.5":1.3220723466,"q_0.85":1.8922148124,"q_0.95":2.2269070541},{"on_year":11,"q_0.05":0.5052809339,"q_0.15":0.8563091184,"q_0.5":1.4542795813,"q_0.85":2.0522500441,"q_0.95":2.4032782286},{"on_year":12,"q_0.05":0.5952900557,"q_0.15":0.9619270369,"q_0.5":1.5864868159,"q_0.85":2.211046595,"q_0.95":2.5776835761}],
    "9":[{"on_year":1,"q_0.05":-0.1659389202,"q_0.15":-0.0551662236,"q_0.5":0.1335331561,"q_0.85":0.3222325359,"q_0.95":0.4330052325},{"on_year":2,"q_0.05":-0.1564511597,"q_0.15":0.0002050902,"q_0.5":0.2670663123,"q_0.85":0.5339275343,"q_0.95":0.6905837843},{"on_year":3,"q_0.05":-0.1181013833,"q_0.15":0.0737625553,"q_0.5":0.4005994684,"q_0.85":0.7274363815,"q_0.95":0.9193003202},{"on_year":4,"q_0.05":-0.0648115282,"q_0.15":0.1567338651,"q_0.5":0.5341326246,"q_0.85":0.9115313841,"q_0.95":1.1330767774},{"on_year":5,"q_0.05":-0.0019741395,"q_0.15":0.2457211403,"q_0.5":0.6676657807,"q_0.85":1.0896104212,"q_0.95":1.3373057009},{"on_year":6,"q_0.05":0.0676451575,"q_0.15":0.3389817417,"q_0.5":0.8011989369,"q_0.85":1.263416132,"q_0.95":1.5347527162},{"on_year":7,"q_0.05":0.1424034543,"q_0.15":0.4354804616,"q_0.5":0.934732093,"q_0.85":1.4339837244,"q_0.95":1.7270607317},{"on_year":8,"q_0.05":0.2212303052,"q_0.15":0.534542805,"q_0.5":1.0682652491,"q_0.85":1.6019876933,"q_0.95":1.9153001931},{"on_year":9,"q_0.05":0.3033821761,"q_0.15":0.635700266,"q_0.5":1.2017984053,"q_0.85":1.7678965445,"q_0.95":2.1002146345},{"on_year":10,"q_0.05":0.3883177044,"q_0.15":0.7386117283,"q_0.5":1.3353315614,"q_0.85":1.9320513945,"q_0.95":2.2823454184},{"on_year":11,"q_0.05":0.475628205,"q_0.15":0.8430196767,"q_0.5":1.4688647176,"q_0.85":2.0947097584,"q_0.95":2.4621012301},{"on_year":12,"q_0.05":0.5649961702,"q_0.15":0.9487240475,"q_0.5":1.6023978737,"q_0.85":2.2560716999,"q_0.95":2.6397995772}]
  }
  $scope.$on("$ionicView.enter", function(event, data){
   // handle event

    var level =  Math.round(($rootScope.level-9)/30*9+1) || 5
    console.log("showing result ... " + level);
    if(level == 10) level = 9
    $scope.data = {
      levelvalue: level,
    }
    _drawPieChart($scope.data.levelvalue);
    $scope.changeLevel = function() {

      console.log('range value has changed to :'+$scope.data.levelvalue);
      _drawPieChart($scope.data.levelvalue)

    }
  });
})

.controller('QuizCtrl', function($scope, Speaks, $rootScope) {
  $scope.quizIndex = 0;
  var quizs = [{quiz : "您的年齡是?", choices :[{desc: "A. 超過65", score : 1 },{desc: "B. 46–65", score : 2 },{desc: "C. 36–45", score : 3 },{desc: "D. 18–35", score : 4 }] },{quiz : "您有多少年投資產品的經驗?", choices :[{desc: "A. 少於1年", score : 1 },{desc: "B. 1年至5年", score : 2 },{desc: "C. 6年至10年", score : 3 },{desc: "D. 超過10年", score : 4 }] },{desc : "可理解為您計劃的整體投資年期為? 一般來說,投資年期越長,您投資價值的波動越少。換言之,投資年期較長,錄得虧損的機會一般較 低,但資金需被鎖定一段較長時期", quiz : "購買投資產品時,您認為持有多久才合適?", choices :[{desc: "A. 少於1年", score : 1 },{desc: "B. 1年至5年", score : 2 },{desc: "C. 6年至10年", score : 3 },{desc: "D. 無特定年期。不確定預計的年期", score : 4 }] },{quiz : "您的投資目標是?", choices :[{desc: "A. 平穩增長", score : 1 },{desc: "B. 均衡增長", score : 2 },{desc: "C. 高速增長", score : 3 },{desc: "D. 投機", score : 4 }] },{quiz : "您願意投資於波幅多大的投資產品?", choices :[{desc: "A. 於– 5%至+ 5%之間的波幅", score : 1 },{desc: "B. 於– 10%至+ 10%之間的波幅", score : 2 },{desc: "C. 於– 20%至+ 20%之間的波幅", score : 3 },{desc: "D. 於– 20%至+ 20%以上之間的波幅", score : 4 }] },{desc:"可動用收入的定義:扣除稅項、退休金供款及必需開支後,例如按揭供款或租金、汽車貸款、保險、食品、衣履、兒童或長者照顧和水、電、煤、差餉等開支,所剩餘的收 入金額(包括工資、股息、花紅等)", quiz : "平均來說,您每月可動用的家庭收入有多少?", choices :[{desc: "A. 4,000至15,000港元", score : 1 },{desc: "B. 15,001至30,000港元", score : 2 },{desc: "C. 30,001至60,000港元", score : 3 },{desc: "D. 多於60,000 港元", score : 4 }] },{desc:"如為多項,請選擇最高分數一項。", quiz : "您現時是否持有以下任何投資產品?", choices :[{desc: "A. 現金、存款", score : 1 },{desc: "B. 債券、債券基金", score : 2 },{desc: "C. 股票、開放式基金、非保本投資產品", score : 3 },{desc: "D. 認股權證(窩輪)、期權、期貨", score : 4 }] },{quiz : "在過往一年,您曾執行過多少次交易?", choices :[{desc: "A. 少於50次交易", score : 1 },{desc: "B. 50至100次交易", score : 2 },{desc: "C. 101至500次交易", score : 3 },{desc: "D. 多過500次交易", score : 4 }] },{quiz : "您的儲備金額大約可應付多少個月的家庭基本開支?", choices :[{desc: "A. 少於3個月", score : 1 },{desc: "B. 3個月至少於6個月", score : 2 },{desc: "C. 6個月至少於9個月", score : 3 },{desc: "D. 多過9個月", score : 4 }] },{quiz : "您對金融市場和投資的認識有多少?", choices :[{desc: "A. 低水平:我對金融市場只有一些基本知識,例如股票和債券的分別。", score : 1 },{desc: "B. 中等水平:達基本知識以上的水平,明白分散投資的重要性,並作出分散投資(即把資金配置於不同類別的投資,以分散風險)", score : 2 },{desc: "C. 高水平:我懂得閱讀一家公司的財務報告(即損益表及資產負債表),並明白影響股票和債券價格的因素", score : 3 },{desc: "D. 精通:我熟識大部份金融產品(包括債券、股票、認股權證、期權及期貨),並明白影響這些金融產品的風險和表現的各項 因素", score : 4 }] }] ;
  
  $scope.$on("$ionicView.enter", function(event, data){
    $scope.quizIndex = 0;
    $scope.quiz = quizs[$scope.quizIndex]["quiz"]
    $scope.choices = quizs[$scope.quizIndex]["choices"]
    $scope.data = {
      selectedChoice :1
    }
    $scope.scoreStack = []
  })
  $scope.next = function() {
    if($scope.quizIndex < quizs.length - 1) {
      var currentScore = $scope.data.selectedChoice
      $scope.scoreStack.push(currentScore)
      //$scope.totalScore =  currentScore + $scope.totalScore
      $scope.quizIndex ++ ;
      $scope.quiz = quizs[$scope.quizIndex]["quiz"]
      $scope.choices = quizs[$scope.quizIndex]["choices"]
      $scope.desc = quizs[$scope.quizIndex]["desc"]
    } else { // get result
      var currentScore = $scope.data.selectedChoice
      $scope.scoreStack.push(currentScore)
      var totalScore = 0
      for(var i in $scope.scoreStack) {
        totalScore = totalScore + $scope.scoreStack[i]
      }
      $rootScope.level = totalScore
      location.href = "#/tab/dash"
    }
    //$scope.selectedChoice = 1
  }
  $scope.prev = function() {
    $scope.scoreStack.pop()
    $scope.quizIndex -- ;
    $scope.quiz = quizs[$scope.quizIndex]["quiz"]
    $scope.choices = quizs[$scope.quizIndex]["choices"]
    //$scope.selectedChoice = 1
  }
})

.controller('ChatDetailCtrl', function($scope, $stateParams, Chats) {
  $scope.chat = Chats.get($stateParams.chatId);
})

.controller('AccountCtrl', function($scope) {
  $scope.settings = {
    enableFriends: true
  };
});
